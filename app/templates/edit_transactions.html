{% extends "base.html" %}
{% block title %}Edit Transactions{% endblock %}
{% block content %}
<h1>Edit Transactions</h1>

<!-- Add New Transaction -->
<form method="POST" action="{{ url_for('transactions.add_transaction') }}">
    <div class="form-group">
        <label for="date">Date</label>
        <input type="date" name="date" class="form-control" required>
    </div>
    <div class="form-group">
        <label for="transaction_detail">Transaction Detail</label>
        <input type="text" name="transaction_detail" class="form-control" required>
    </div>
    <div class="form-group">
        <label for="amount">Amount</label>
        <input type="number" step="0.01" name="amount" class="form-control" required>
    </div>
    <div class="form-group">
        <label for="balance">Balance</label>
        <input type="number" step="0.01" name="balance" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-success">Add Transaction</button>
</form>

<hr>

<!-- Display Transactions with Checkboxes -->
<form method="POST" action="{{ url_for('transactions.delete_transactions') }}">
    <button type="submit" class="btn btn-danger">Delete Selected</button>
    <table class="table">
        <thead>
            <tr>
                <th><input type="checkbox" id="select-all"></th>
                <th>Date</th>
                <th>Transaction Detail</th>
                <th>Amount</th>
                <th>Balance</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in transactions %}
            <tr>
                <td><input type="checkbox" name="transaction_ids" value="{{ transaction.id }}"></td>
                <td>{{ transaction.date }}</td>
                <td>{{ transaction.transaction_detail }}</td>
                <td>{{ transaction.amount }}</td>
                <td>{{ transaction.balance }}</td>
                <td>
                    <a href="{{ url_for('transactions.edit_transaction', transaction_id=transaction.id) }}"
                        class="btn btn-primary">Edit</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</form>

<script>
    // JavaScript to handle "Select All" functionality
    document.getElementById('select-all').addEventListener('change', function () {
        const checkboxes = document.querySelectorAll('input[name="transaction_ids"]');
        checkboxes.forEach(checkbox => checkbox.checked = this.checked);
    });
</script>
{% endblock %}